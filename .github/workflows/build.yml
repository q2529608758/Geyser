name: Build


on:
  push:
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout sources
        uses: actions/checkout@v4
      - name: Setup Java
        uses: actions/setup-java@v4
        with:
            distribution: 'temurin'
            java-version: 22
      - name: Build with Gradle
        run:
          git submodule update --init
          ./gradlew build
      - name: Archive Artifacts
        uses: GeyserMC/actions/upload-multi-artifact@master
        if: success()
        with:
            artifacts: |
                bootstrap/mod/fabric/build/libs/Geyser-Fabric.jar
                bootstrap/mod/neoforge/build/libs/Geyser-NeoForge.jar
                bootstrap/standalone/build/libs/Geyser-Standalone.jar
                bootstrap/spigot/build/libs/Geyser-Spigot.jar
                bootstrap/bungeecord/build/libs/Geyser-BungeeCord.jar
                bootstrap/velocity/build/libs/Geyser-Velocity.jar
                bootstrap/viaproxy/build/libs/Geyser-ViaProxy.jar
